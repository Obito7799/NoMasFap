<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camino a la Recuperación</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-firestore-compat.js"></script>
    <style>
        :root {
            --primary-color: #4CAF50;
            --secondary-color: #45a049;
            --accent-color: #f8f9fa;
            --text-color: #333;
            --background-color: #1a1a1a;
        }
 
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
 
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }
 
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }
 
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
 
        .welcome-screen {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            margin: 40px auto;
        }
 
        .logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
 
        .logo svg {
            width: 60px;
            height: 60px;
            fill: white;
        }
 
        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2.5em;
        }
 
        .welcome-text {
            color: var(--text-color);
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
 
        .cta-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.3s ease, background 0.3s ease;
            margin: 10px;
        }
 
        .cta-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }
 
        .progress-dots {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
 
        .dot {
            width: 12px;
            height: 12px;
            background: #ddd;
            border-radius: 50%;
            margin: 0 5px;
            transition: background 0.3s ease;
        }
 
        .dot.active {
            background: var(--primary-color);
        }
 
        .motivation-quote {
            font-style: italic;
            color: #666;
            margin: 20px 0;
            padding: 20px;
            border-left: 4px solid var(--primary-color);
        }
 
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
 
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Estilos modificados para los botones de login social */
        .social-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }

        .social-button {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1em;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 250px;
        }

        .google-btn {
            background: white;
            color: #757575;
            box-shadow: 0 2px 4px rgba(0,0,0,0.25);
        }

        .facebook-btn {
            background: #1877f2;
            color: white;
        }

        .social-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .social-icon {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    
    <div class="container">
        <div class="welcome-screen fade-in" id="welcomeScreen">
            <div class="logo">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2L1 21h22L12 2zm0 3.83L19.17 19H4.83L12 5.83zM11 16h2v2h-2zm0-6h2v4h-2z"/>
                </svg>
            </div>
            <h1>Bienvenido a tu Nuevo Camino</h1>
            <p class="welcome-text" id="welcomeMessage">
                Hoy es el primer día del resto de tu vida. Estamos aquí para acompañarte en cada paso de tu viaje hacia la recuperación.
            </p>
            <div class="motivation-quote" id="dailyQuote">
                "Cada viaje de mil millas comienza con un solo paso"
            </div>
            
            <button class="cta-button" onclick="redirectToJourney()">Comenzar mi Viaje</button>
            <button class="cta-button" onclick="startAssessment()">Realizar Evaluación</button>
            
            <!-- Botones de login social reposicionados -->
            <div class="social-login">
                <button class="social-button google-btn" onclick="signInWithGoogle()">
                    <img src="https://cdn.cdnlogo.com/logos/g/35/google-icon.svg" alt="Google" class="social-icon">
                    Continuar con Google
                </button>
                <button class="social-button facebook-btn" onclick="signInWithFacebook()">
                    <img src="https://cdn.cdnlogo.com/logos/f/83/facebook.svg" alt="Facebook" class="social-icon">
                    Continuar con Facebook
                </button>
            </div>
        </div>
 
        <div class="progress-dots">
            <div class="dot active"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>
 
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Configuración de Firebase
        const firebaseConfig = {
            // Reemplazar con tus credenciales de Firebase
            apiKey: "tu-api-key",
            authDomain: "tu-auth-domain",
            projectId: "tu-project-id",
            storageBucket: "tu-storage-bucket",
            messagingSenderId: "tu-messaging-sender-id",
            appId: "tu-app-id"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Función para autenticación con Google
        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    handleAuthSuccess(result.user);
                })
                .catch((error) => {
                    console.error("Error en autenticación con Google:", error);
                });
        }

        // Función para autenticación con Facebook
        function signInWithFacebook() {
            const provider = new firebase.auth.FacebookAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    handleAuthSuccess(result.user);
                })
                .catch((error) => {
                    console.error("Error en autenticación con Facebook:", error);
                });
        }

        // Manejar el éxito de autenticación
        function handleAuthSuccess(user) {
            const loginData = {
                userId: user.uid,
                email: user.email,
                loginTime: new Date(),
                lastActive: new Date()
            };

            db.collection('userSessions').add(loginData)
                .then(() => {
                    console.log("Sesión registrada exitosamente");
                    redirectToJourney();
                })
                .catch((error) => {
                    console.error("Error al registrar sesión:", error);
                });

            startActivityMonitor(user);
        }

        // Monitor de actividad
        function startActivityMonitor(user) {
            let lastActive = new Date();
            const INACTIVE_THRESHOLD = 30 * 60 * 1000; // 30 minutos

            function updateLastActive() {
                lastActive = new Date();
                db.collection('userSessions')
                    .where('userId', '==', user.uid)
                    .orderBy('loginTime', 'desc')
                    .limit(1)
                    .get()
                    .then((querySnapshot) => {
                        if (!querySnapshot.empty) {
                            querySnapshot.docs[0].ref.update({
                                lastActive: lastActive
                            });
                        }
                    });
            }

            setInterval(() => {
                const now = new Date();
                if (now - lastActive > INACTIVE_THRESHOLD) {
                    sendInactivityEmail(user.email);
                }
            }, 60000);

            ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(
                event => document.addEventListener(event, updateLastActive)
            );
        }

        function redirectToJourney() {
            window.location.href = "comenzar-mi-viaje.html";
        }

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Configuración de partículas
        particlesJS("particles-js", {
            "particles": {
                "number": {
                    "value": 80,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#4CAF50"
                },
                "shape": {
                    "type": "circle",
                    "stroke": {
                        "width": 0,
                        "color": "#000000"
                    }
                },
                "opacity": {
                    "value": 0.5,
                    "random": false,
                    "anim": {
                        "enable": false,
                        "speed": 1,
                        "opacity_min": 0.1,
                        "sync": false
                    }
                },
                "size": {
                    "value": 5,
                    "random": true,
                    "anim": {
                        "enable": false,
                        "speed": 40,
                        "size_min": 0.1,
                        "sync": false
                    }
                },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#4CAF50",
                    "opacity": 0.4,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 6,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {
                        "enable": false,
                        "rotateX": 600,
                        "rotateY": 1200
                    }
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": true,
                        "mode": "repulse"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                },
                "modes": {
                    "grab": {
                        "distance": 400,
                        "line_linked": {
                            "opacity": 1
                        }
                    },
                    "bubble": {
                        "distance": 400,
                        "size": 40,
                        "duration": 2,
                        "opacity": 8,
                        "speed": 3
                    },
                    "repulse": {
                        "distance": 200,
                        "duration": 0.4
                    },
                    "push": {
                        "particles_nb": 4
                    },
                    "remove": {
                        "particles_nb": 2
                    }
                }
            },
            "retina_detect": true
        });

        const welcomeMessages = [
            "Hoy es el primer día del resto de tu vida.",
            "Tu decisión de cambio ya es un gran paso adelante.",
            "Estamos aquí para apoyarte en cada momento."
        ];
 
        const quotes = [
            "Cada día es una nueva oportunidad para ser mejor.",
            "La fuerza no viene de lo que puedes hacer, sino de superar lo que no podías hacer.",
            "El viaje más importante es el que hacemos hacia nosotros mismos."
        ];
 
        function getRandomMessage(array) {
            return array[Math.floor(Math.random() * array.length)];
        }
 
        function updateWelcomeMessage() {
            document.getElementById('welcomeMessage').textContent = getRandomMessage(welcomeMessages);
            document.getElementById('dailyQuote').textContent = getRandomMessage(quotes);
        }
 
        setInterval(updateWelcomeMessage, 5000);
 
        function startAssessment() {
            window.location.href = "test-de-adiccion.html";
        }

    </script>
</body>
</html>
